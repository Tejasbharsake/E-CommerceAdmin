@model GSTECommerceLibrary.Admin.Admin
@using System.Data

<head>
    <link href="~/Content/Document/CSS/custom-datatables.css" rel="stylesheet" />
    <link href="~/Content/Document/CSS/CustomerManagementANB.css" rel="stylesheet" />
</head>

<!-- Export Buttons Row -->
<div class="row mb-3">
    <div class="col-12 d-flex justify-content-end gap-2">
        <button class="btn btn-outline-primary btn-sm" id="copyBtn" title="Copy">
            <img src="~/Content/Document/Image/Copy.png" alt="Copy" width="20" height="20" />
        </button>
        <button class="btn btn-outline-info btn-sm" id="csvBtn" title="Export to CSV">
            <img src="~/Content/Document/Image/CSV.png" alt="CSV" width="20" height="20" />
        </button>
        <button class="btn btn-outline-success btn-sm" id="excelBtn" title="Export to Excel">
            <img src="~/Content/Document/Image/XLS.png" alt="Excel" width="20" height="20" />
        </button>
        <button class="btn btn-outline-danger btn-sm" id="pdfBtn" title="Export to PDF">
            <img src="~/Content/Document/Image/PDFicon.png" alt="PDF" width="20" height="20" />
        </button>
        <button class="btn btn-outline-dark btn-sm" id="printBtn" title="Print">
            <img src="~/Content/Document/Image/Print.png" alt="Print" width="20" height="20" />
        </button>
    </div>
</div>

<table class="table table-bordered table-striped" id="table1">
    <thead>
        <tr>
            <th style="width: 50px; text-align: center;">
                <input type="checkbox" id="selectAll" />
            </th>
            <th>Sr No</th>
            <th>Customer Code</th>
            <th>Customer Name</th>
            <th>Email</th>
            <th>Mobile No</th>
            <th>Address</th>
            <th>City</th>
            <th>State</th>
            <th>Total Orders</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        @if (Model?.CoustomerList != null && Model.CoustomerList.Any())
        {
            int serialNumber = 1;
            foreach (var row in Model.CoustomerList)
            {
                <tr>
                    <td style="text-align: center; width: 50px;">
                        <input type="checkbox" class="row-checkbox" value="@row.CustomerCode" />
                    </td>
                    <td>@serialNumber</td>
                    <td>@row.CustomerCode</td>
                    <td>@row.CustomerName</td>
                    <td>@row.EmailId</td>
                    <td>@($"+91 {row.MobileNo}")</td>
                    <td>@row.Address</td>
                    <td>@row.CityName</td>
                    <td>@row.StateName</td>
                    <td>@row.TotalOrders</td>
                    <td>
                        <button class="btn btn-sm view-customer" data-customer="@row.CustomerCode">
                            <i class="bi bi-eye"></i>
                        </button>
                    </td>
                </tr>
                serialNumber++;
            }
        }
        else
        {
            <tr>
                <td style="text-align:center;" colspan="11">No customers found.</td>
            </tr>
        }
    </tbody>
</table>

<!-- Customer Details Modal -->
<div class="modal fade" id="customerDetailsModal" tabindex="-1" aria-labelledby="customerDetailsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header text-white" style="background: #2C3E50;">

                <h5 class="modal-title" id="customerDetailsModalLabel">Customer Details</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>

            </div>
            <div class="modal-body" id="customerDetailsBody">
                <!-- Customer details will be loaded here -->
            </div>
        </div>
    </div>
</div>